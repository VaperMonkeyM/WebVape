<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Panel Admin — The King Puff</title>
  <link rel="stylesheet" href="style.css">
</head>

<body>

<header class="header">
  <div class="container header-inner">
    <a class="logo" href="index.html">
      <span class="logo-mark"><img src="content.png"></span>
      <span>
        <span class="logo-top">The King Puff</span>
      </span>
    </a>
  </div>
</header>

<!-- MENSAJE DE SIN PERMISOS -->
<div id="noAccessMessage" class="hidden">
  <section class="section container" style="text-align: center; padding: 60px 20px;">
    <h2 class="section-title">Acceso denegado</h2>
    <p style="font-size: 18px; margin: 20px 0;">No tienes permisos para acceder al panel de administración.</p>
    <a href="index.html" class="btn-primary" style="display: inline-block; margin-top: 20px;">Volver al inicio</a>
  </section>
</div>

<section class="section-admin container" id="adminPanel">

  <h2 class="section-title">Panel de administración</h2>

  <!-- Categorías -->
  <div class="admin-card">
    <h3 class="admin-title">Categorías</h3>

    <form id="categoryForm" class="admin-form">
      <input id="catName" type="text" placeholder="Nueva categoría">
      <button class="btn-primary">Añadir</button>
    </form>

    <div id="adminCategoryList" class="admin-list"></div>
  </div>

  <!-- Vapers -->
  <div class="admin-card">
    <h3 class="admin-title">Vapers</h3>

    <form id="vaperForm" class="admin-form">
      <input id="vaperName" type="text" placeholder="Nombre del vaper">
      <select id="vaperCategory"></select>
      <input id="vaperImage" type="text" placeholder="Imagen general (opcional)">
      <button class="btn-primary">Crear vaper</button>
    </form>

    <div id="adminVaperList" class="admin-vapers"></div>
  </div>

  <!-- Sorteo -->
  <div class="admin-card">
    <h3 class="admin-title">Sorteo</h3>

    <div style="margin-bottom: 20px;">
      <label>Estado del sorteo</label>
      <div style="display: flex; gap: 10px; align-items: center;">
        <input type="checkbox" id="raffleActive">
        <span id="raffleStatus" style="color: var(--text-soft);">Inactivo</span>
      </div>
    </div>

    <div style="margin-bottom: 20px;">
      <label>Premio</label>
      <input id="rafflePrize" type="text" placeholder="Describe el premio" />
    </div>

    <div style="margin-bottom: 20px;">
      <label>Participantes activos</label>
      <div id="raffleParticipantsList" style="max-height: 200px; overflow-y: auto; border: 1px solid var(--border); border-radius: 8px; padding: 10px; background: rgba(0,0,0,0.2);">
        <p style="color: var(--text-soft);">Cargando...</p>
      </div>
    </div>

    <button id="raffleRunBtn" class="btn-primary full" style="margin-bottom: 10px;">
      Realizar sorteo
    </button>

    <div id="raffleResult" style="margin-top: 10px; padding: 10px; border-radius: 8px; background: rgba(57, 255, 20, 0.1); display: none; border: 1px solid var(--neon-green);">
      <p id="raffleResultText" style="color: var(--neon-green); margin: 0;"></p>
    </div>
  </div>
  
    <!-- Estadísticas -->
    <div class="admin-card" id="adminStats">
      <h3 class="admin-title">Estadísticas</h3>
      <div style="display:flex;flex-direction:column;gap:8px;">
        <div><strong>Vapers totales:</strong> <span id="statVapers">—</span></div>
        <div><strong>Usuarios totales:</strong> <span id="statUsers">—</span></div>
        <div><strong>Reservas estimadas:</strong> <span id="statReservations">—</span></div>
      </div>
    </div>
</section>

<!-- MODAL EDITOR VAPER -->
<div id="editVaperModal" class="modal-overlay hidden">
  <div class="modal">
    <button id="editVaperClose" class="modal-close">✕</button>

    <h2 id="editVaperTitle"></h2>

    <div class="modal-body">
      <label>Nombre</label>
      <input id="editVaperName" type="text">

      <label>Categoría</label>
      <select id="editVaperCategory"></select>

      <label>Imagen general</label>
      <input id="editVaperImg" type="text">

      <h3>Sabores</h3>
      <div id="editVaperFlavors"></div>

      <button id="addFlavorBtn" class="btn-ghost full">Añadir sabor</button>

      <button id="saveVaperChanges" class="btn-primary full" style="margin-top:20px">
        Guardar cambios
      </button>
    </div>
  </div>
</div>

<script type="module">
  import { checkAdminAccess } from "./main.js";
  checkAdminAccess();
</script>
<script type="module" src="main.js"></script>
</body>
</html>
